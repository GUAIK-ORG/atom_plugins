# æ€ªå®¢å·¥ä¸š1å·æ¡†æ¶ï¼ˆAtomï¼‰

> äº§å“ç¼–å·ï¼šGKIF-No.1
 
---

## ğŸš€ ç»„ä»¶æ¡†æ¶çš„ç‰¹ç‚¹

åœ¨å¼€å‘ä¸€æ¬¾è½¯ä»¶ï¼ˆä¸Šä½æœºï¼‰äº§å“æ—¶é€šå¸¸é‡‡ç”¨å¤šäººåŒæ—¶å¯¹ä¸€å¥—ä»£ç è¿›è¡Œä¿®æ”¹çš„å½¢å¼ï¼Œè¿™ç§å°†æ‰€æœ‰åŠŸèƒ½éƒ½å†™åœ¨ä¸€å¥—ä»£ç ä¸­çš„æ–¹å¼ç§°ä¸ºã€å•å—æ¶æ„ã€‘ã€‚å•å—æ¶æ„å­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹å¦‚ä¸‹ï¼š

> * ç»´æŠ¤æˆæœ¬å¢åŠ  
> * æŒç»­äº¤ä»˜å‘¨æœŸé•¿ 
> * æ–°äººåŸ¹å…»å‘¨æœŸé•¿
> * æŠ€æœ¯é€‰å‹æˆæœ¬é«˜
> * å¯ä¼¸ç¼©æ€§å·®
> * æ„å»ºå…¨åŠŸèƒ½å›¢é˜Ÿéš¾

ä¸ºäº†è§£å†³å•å—æ¶æ„é¢ä¸´çš„æŒ‘æˆ˜ï¼Œå‡ºç°äº†æ–°çš„æ¶æ„ã€å¾®æœåŠ¡ã€‘ï¼Œå¾®æœåŠ¡æ¶æ„çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š

> * è§£è€¦ï¼šåŒä¸€ç³»ç»Ÿå†…çš„æœåŠ¡å¤§éƒ¨åˆ†å¯ä»¥è¢«è§£è€¦ã€‚å› æ­¤åº”ç”¨ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå¯ä»¥è½»æ˜“åœ°è¢«æ„å»ºã€ä¿®æ”¹å’Œæ‰©å±•ã€‚
> * ç»„ä»¶åŒ–ï¼šå¾®æœåŠ¡å¯ä»¥è¢«çœ‹æˆç›¸äº’ç‹¬ç«‹çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥è¢«è½»æ˜“åœ°æ›¿æ¢å’Œå‡çº§ã€‚
> * ä¸šåŠ¡èƒ½åŠ›ï¼šå¾®æœåŠ¡å¾ˆå°ï¼Œå®ƒä»¬å¯ä»¥ä¸“æ³¨äºæŸç§å•ä¸€çš„èƒ½åŠ›ã€‚
> * è‡ªæ²»ï¼šå¼€å‘è€…å’Œå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹åœ°å·¥ä½œï¼Œæé«˜å¼€å‘é€Ÿåº¦ã€‚
> * æŒç»­äº¤ä»˜ï¼šå…è®¸æŒç»­å‘å¸ƒè½¯ä»¶æ–°ç‰ˆæœ¬ï¼Œé€šè¿‡ç³»ç»ŸåŒ–çš„è‡ªåŠ¨æ‰‹æ®µæ¥åˆ›å»ºã€æµ‹è¯•å’Œæ‰¹å‡†æ–°ç‰ˆæœ¬ã€‚
> * èŒè´£æ˜ç¡®ï¼šå¾®æœåŠ¡ä¸æŠŠåº”ç”¨çœ‹æˆä¸€ä¸ªåˆä¸€ä¸ªçš„é¡¹ç›®ã€‚ç›¸åï¼Œå®ƒä»¬æŠŠåº”ç”¨å½“æˆäº†è‡ªå·±éœ€è¦è´Ÿè´£çš„é¡¹ç›®ã€‚
> * å»ä¸­å¿ƒåŒ–ç®¡ç†ï¼šå…³æ³¨äºä½¿ç”¨æ­£ç¡®çš„å·¥å…·æ¥å®Œæˆæ­£ç¡®çš„å·¥ä½œã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰æ ‡å‡†åŒ–çš„æ–¹å¼æˆ–è€…æŠ€æœ¯æ¨¡å¼ã€‚å¼€å‘è€…ä»¬æœ‰æƒé€‰æ‹©æœ€å¥½çš„å·¥å…·æ¥è§£å†³é—®é¢˜ã€‚
> * æ•æ·æ€§ï¼šå¾®æœåŠ¡æ”¯æŒæ•æ·å¼€å‘ã€‚ä»»ä½•æ–°åŠŸèƒ½éƒ½å¯ä»¥è¢«å¿«é€Ÿå¼€å‘æˆ–ä¸¢å¼ƒã€‚

**ä»¥ä¸Šå†…å®¹æ¥è‡ªç½‘ç»œï¼Œä¸‹é¢è¯´ä¸‹æˆ‘è‡ªå·±çš„çœ‹æ³•**

* å¯¹äºC++å¼€å‘è€Œè¨€ï¼Œéšç€é¡¹ç›®ä»£ç é‡çš„å¢åŠ ï¼Œç¼–è¯‘é€Ÿåº¦ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ï¼Œå¦‚æœç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼æ¯ä¸ªäººåªéœ€è¦ç¼–è¯‘è‡ªå·±å¼€å‘çš„ç»„ä»¶å³å¯ï¼Œå¤§å¤§**æå‡ç¼–è¯‘æ•ˆç‡**ã€‚

* ç”±äºå°†é¡¹ç›®åˆ†è§£æˆäº†ä¸åŒçš„æ¨¡å—ï¼Œåˆ†å·¥å°†ä¼šæ›´åŠ æ˜ç¡®ï¼Œæœ‰æ–°äººå…¥èŒæ—¶åªéœ€è¦åŸ¹è®­ç»„ä»¶å¼€å‘ç›¸å…³çš„æŠ€æœ¯å’Œç›¸å…³çš„ä¸šåŠ¡å³å¯**å¿«é€Ÿä¸Šæ‰‹**ã€‚

* åä½œæ˜¯é€šè¿‡ç»„ä»¶æ¥å£æˆ–ç»„ä»¶é—´é€šè®¯å®ç°çš„ï¼Œæ— éœ€æ‹…å¿ƒä¸åŒæ¨¡å—çš„å¼€å‘è€…ä¼šæ— æ„é—´ä¿®æ”¹åˆ°ä»–äººçš„ä»£ç ï¼Œè¿™å°†ä¼š**æ›´å®‰å…¨**ã€‚

* ç»„ä»¶å…¨éƒ¨å¼€æºï¼Œéšç€å¼€æºç»„ä»¶çš„å¢å¤šï¼Œæ¡†æ¶å°†æä¾›æ›´å¤šçš„åŠŸèƒ½ï¼Œ**æé«˜å¼€å‘æ•ˆç‡**ã€‚

* ã€ŠAtomã€‹æ¡†æ¶**æ°¸ä¹…å…è´¹**ä½¿ç”¨ï¼Œæ— éœ€æ‹…å¿ƒèŠ±è´¹é¢å¤–çš„è´¹ç”¨ã€‚

ä¸ºäº†å®ç°ä¸Šè¿°ç‰¹æ€§ï¼Œæˆ‘æ¨å‡ºäº† **ğŸ‰ã€Šæ€ªå®¢å·¥ä¸š1å·æ¡†æ¶ - Atomã€‹ğŸ‰**

## ğŸ”† ã€ŠAtomã€‹æ¡†æ¶ç‰¹æ€§

* å®ç°äº†ç»„ä»¶çš„ä¾èµ–æ£€æŸ¥ï¼Œè¢«ä¾èµ–çš„ç»„ä»¶ä¼˜å…ˆåŠ è½½ï¼Œç¡®ä¿è°ƒç”¨æ—¶ç»„ä»¶å·²è¢«æ­£ç¡®è½½å…¥ï¼Œèƒ½å¤Ÿæ£€æµ‹äº’ç›¸ä¾èµ–å…³ç³»ï¼ˆAä¾èµ–Bçš„åŒæ—¶Bä¾èµ–Aï¼‰ã€‚

* é›†æˆäº†ZeroMQä½œä¸ºæ¡†æ¶é—´é€šè®¯ï¼Œåªéœ€è¦ç®€å•çš„ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯å®ç°å¤šæ¡†æ¶é€šè®¯ã€‚ 

* å¯é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šçš®è‚¤èµ„æºã€‚

* å†…ç½®ä¸Šç™¾ä¸ªå›¾æ ‡èµ„æºå¯ç”¨ä½œæ’ä»¶Iconã€‚

* ç”Ÿå‘½å‘¨æœŸç»„ä»¶ï¼Œå¯åœ¨ä¸åŒé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œç›¸å…³ä»£ç ã€‚

* å¤šçº§åˆ«æ—¥å¿—æœåŠ¡ï¼Œå¯åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶ã€‚

## ğŸ§© åŸºç¡€ç»„ä»¶

| ç±»å‹ | åç§° | ç®€ä»‹ | å¼€å‘çŠ¶æ€ |
| - | - | - | - |
| æœåŠ¡ | net | æä¾›TCPå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŠŸèƒ½åŠè¿æ¥çŠ¶æ€ç®¡ç†ï¼Œæ–­çº¿è‡ªåŠ¨é‡è¿ | âœ… |
| æœåŠ¡ | script | æä¾›luaè„šæœ¬ç›¸å…³æœåŠ¡ | âŒ |
| çª—ä½“ | title | æ ‡é¢˜æ ï¼šæ˜¾ç¤ºæ ‡é¢˜ï¼Œæä¾›å…¨å±ã€æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€å…³é—­æŒ‰é’® | âœ… |
| çª—ä½“ | statusbar | åº•éƒ¨çŠ¶æ€æ ï¼šæ˜¾ç¤ºæ—¶é—´å’Œç½‘ç»œè¿æ¥çŠ¶æ€ | âœ… |
| çª—ä½“ | plugin_manager | æ’ä»¶ç®¡ç†ï¼šç”Ÿæˆæ’ä»¶æ¨¡ç‰ˆä»£ç  | ğŸ‘¨â€ğŸ’» |

## âš™ï¸ å¼€å§‹ä½¿ç”¨

### å®‰è£… & é…ç½®

* ä¸‹è½½æ¡†æ¶å¯æ‰§è¡Œç¨‹åº

https://gitee.com/GuaikOrg/atom_plugins/releases/tag/v1.0.0

https://github.com/GUAIK-ORG/atom_plugins/releases/tag/v1.0.0

* å®‰è£…Qt5.15.2ç‰ˆæœ¬

> ç¼–è¯‘å·¥å…·ï¼šmingw
> 
> å¼€æºåè®®ï¼šLGPL

* é…ç½®ç¯å¢ƒå˜é‡

| å˜é‡å | å˜é‡å€¼ |
| - | - |
| Path | Qtè·¯å¾„\5.15.2\mingw81_64\bin |
| Path | Qtè·¯å¾„\Tools\mingw810_64\bin |
| Path | æ¡†æ¶è·¯å¾„\env |


## ğŸ—‚ æ’ä»¶å¼€å‘æ•™ç¨‹

### å¿«é€Ÿå¼€å§‹

#### ä½ å¥½ï¼Atom

https://www.bilibili.com/video/BV1QN4y1V7Wx/

å¼€å‘å†…å®¹ä¸»è¦åˆ†ä¸¤ç±»ï¼š

* æœåŠ¡ç»„ä»¶

* çª—ä½“ç»„ä»¶

æœåŠ¡ç»„ä»¶èƒ½å¤Ÿä¸ºå…¶ä»–çš„æœåŠ¡ç»„ä»¶æä¾›åŠŸèƒ½æ¥å£ï¼Œçª—ä½“ç»„ä»¶èƒ½å¤Ÿæä¾›ä¸€ä¸ªèœå•ä»¥åŠå’Œç”¨æˆ·çš„äº¤äº’ç•Œé¢ï¼Œç•Œé¢ç»„ä»¶èƒ½å¤Ÿé€‰æ‹©ä¸åŒçš„å±•ç°æ–¹å¼ï¼ˆåˆ‡æ¢æˆ–å¼¹çª—ï¼‰ã€‚**ç•Œé¢ç»„ä»¶æ— æ³•å¯¹å¤–æä¾›æ¥å£**ã€‚

### æ¡†æ¶é…ç½®æ–‡ä»¶

| å­—æ®µåç§° | æè¿° |
| - | - |
| version | ç‰ˆæœ¬å· |
| index | é¦–é¡µç»„ä»¶ |
| show_type | å¯åŠ¨æ—¶çª—å£çŠ¶æ€ |
| win_size | çª—å£å¤§å° |
| titlebar | æ ‡é¢˜æ ç»„ä»¶ |
| statusbar | çŠ¶æ€æ ç»„ä»¶ |
| skin | çš®è‚¤ |
| mq_port | æ¶ˆæ¯é˜Ÿåˆ—æœ¬åœ°ç›‘å¬ç«¯å£ |
| mq_nodes | æ¶ˆæ¯é˜Ÿåˆ—è¿æ¥åœ°å€ |
| log_level | æ—¥å¿—çº§åˆ« |

### ç»„ä»¶é…ç½®æ–‡ä»¶

| å­—æ®µåç§° | æè¿° |
| - | - |
| name | ç»„ä»¶å |
| id | ç»„ä»¶idï¼ˆå¿…é¡»å…¨å±€å”¯ä¸€ï¼‰ |
| version | ç‰ˆæœ¬å· |
| description | æè¿° |
| type | ç±»å‹[æœåŠ¡:0 çª—ä½“:1] |
| icon | å›¾æ ‡ |
| icon_color | å›¾æ ‡é¢œè‰² |
| display_mode | æ˜¾ç¤ºæ–¹å¼[å†…åµŒ:0 å¼¹çª—:1] |
| sort_weight | æ’åºæƒé‡ |
| dependents | ä¾èµ–é¡¹ |

### æ¡†æ¶æ¥å£æœåŠ¡

ğŸ’ ä¸€ä¸ªé‡è¦çš„ç›®å½•ï¼š**framework**

**framework**ç›®å½•ä¸‹å­˜æ”¾äº†æ‰€æœ‰æ¡†æ¶å¯¹å¤–æä¾›çš„æ¥å£ã€‚è¦äº†è§£æ¡†æ¶åŠŸèƒ½çš„è¯å¯ä»¥æŠŠè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ¥å£å¤´æ–‡ä»¶çœ‹ä¸€éã€‚

ä¸‹é¢æŒ‘éƒ¨åˆ†å¸¸ç”¨æ¥å£è®²è§£

#### ç»„ä»¶ç®¡ç†å™¨

> æä¾›äº†æ¥å£å¯¹è±¡çš„æ³¨å†Œä¸è·å–

```cpp
/**
 * @brief æ³¨å†Œæ¥å£å¯¹è±¡ï¼ˆä»…æœåŠ¡å¯ç”¨ï¼‰
 * 
 * @param ctx ä¸Šä¸‹æ–‡å¯¹è±¡
 * @param interfaceObj æ¥å£å¯¹è±¡
 * @return int æˆåŠŸ:0
 */
int registerInterfaceObj(IContext* ctx, void* interfaceObj);
```

```cpp
/**
 * @brief è·å–æ¥å£å¯¹è±¡
 * 
 * @param ctx ä¸Šä¸‹æ–‡å¯¹è±¡
 * @param id æ’ä»¶ID
 * @return void* æ¥å£å¯¹è±¡
 */
void* interfaceObj(IContext* ctx, QString id);
```

**ä½¿ç”¨ç¤ºä¾‹**

```cpp
// net
// åœ¨ç½‘ç»œæ’ä»¶ä¸­æ³¨å†Œç½‘ç»œæœåŠ¡æ¥å£
IPluginManager *pluginManager;
if (0 == m_ctx->query(QUERY_TYPE::PLUGIN_MANAGER, (void**)&pluginManager)) {
    m_netService = dynamic_cast<INetService*>(new NetService);
    pluginManager->registerInterfaceObj(m_ctx, m_netService);
}

// dbg
// åœ¨è°ƒè¯•æ’ä»¶ä¸­è·å–ç½‘ç»œæœåŠ¡å¯¹è±¡
IPluginManager* pluginManager;
if (0 == m_ctx->query(QUERY_TYPE::PLUGIN_MANAGER, (void**)&pluginManager)) {
    INetService* net = (INetService*)pluginManager->interfaceObj(m_ctx, "net");
    if (net) {
        // ......
    }
}
```

#### çª—ä½“ç®¡ç†å™¨

> æ§åˆ¶æ¡†æ¶çª—ä½“å’Œæ’ä»¶çª—ä½“ï¼šæ³¨å†Œçª—ä½“ã€æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€å…¨å±ã€æ˜¾ç¤ºã€éšè—çª—ä½“ç­‰

```cpp
/**
 * @brief æ³¨å†Œçª—ä½“å¯¹è±¡
 * 
 * @param ctx ä¸Šä¸‹æ–‡å¯¹è±¡
 * @param id æ³¨å†Œçª—ä½“å¯¹è±¡IDï¼ˆæ’ä»¶IDï¼‰
 * @param widget çª—ä½“å¯¹è±¡
 * @return int æˆåŠŸ:0
 */
virtual int registerWidget(IContext *ctx, QString id, QWidget *widget) = 0;

```

**ä½¿ç”¨ç¤ºä¾‹**

```cpp
// dbg
// åœ¨è°ƒè¯•æ’ä»¶ä¸­æ³¨å†Œçª—ä½“å¯¹è±¡
IWindowManager *winManager;
if (0 == m_ctx->query(QUERY_TYPE::WINDOW_MANAGER, (void**)&winManager)) {
    winManager->registerWidget(m_ctx, "dbg", new MainWidget(m_ctx));
}
```

#### æ¶ˆæ¯ç®¡ç†å™¨

#### å­—ä½“ç®¡ç†å™¨

> å­—ä½“ç®¡ç†å™¨ä¸»è¦æä¾›äº†â€œFont Awesomeâ€å­—ä½“å›¾æ ‡æœåŠ¡

#### æ—¥å¿—ç®¡ç†å™¨

> æä¾›äº†å¼‚æ­¥æ—¥å¿—çš„åŠŸèƒ½ï¼Œæ”¯æŒ **debug** **info** **warn** **error** å››ç§çº§åˆ«ï¼Œèƒ½åŒæ—¶è¾“å‡ºæ§åˆ¶å°å’Œæ–‡ä»¶ï¼Œé»˜è®¤å­˜å‚¨åœ¨logç›®å½•ä¸‹ã€‚



### åˆ›å»ºæœåŠ¡ç»„ä»¶

> æœåŠ¡ç»„ä»¶å¯ä»¥ä¸ºçª—ä½“ç»„ä»¶æˆ–å…¶ä»–æœåŠ¡ç»„ä»¶æä¾›æ¥å£

### ç»„ä»¶é—´é€šè®¯

### æ¡†æ¶é—´é€šè®¯

> åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ¡†æ¶é—´é€šè®¯ï¼Œé€šè¿‡ä¿®æ”¹æ¡†æ¶é…ç½®æ–‡ä»¶æ·»åŠ èŠ‚ç‚¹ä¿¡æ¯å³å¯å®ç°æ¡†æ¶é—´è¿æ¥

### åŸºç¡€ç»„ä»¶

#### ç½‘ç»œç»„ä»¶

> ç½‘ç»œç»„ä»¶ç›®å‰æä¾›äº†TCPæœåŠ¡ç«¯ä¸TCPå®¢æˆ·ç«¯çš„æ¥å£ï¼ŒTCPå®¢æˆ·ç«¯å®ç°äº†æ–­çº¿æ£€æµ‹ä¸é‡è¿çš„åŠŸèƒ½ï¼ˆåŸºäºkeepaliveï¼Œç›¸å…³æ–‡ç« ï¼šhttps://caw.guaik.io/d/1-keepaliveï¼‰


### æœ¬åœ°æ•°æ®å­˜å‚¨

> æä¾›äº†é”®å€¼å¯¹ï¼ˆK/Vï¼‰æ•°æ®çš„å­˜å‚¨

| æ“ä½œ | åŒæ­¥ | å¼‚æ­¥ |
| - | - | - |
| read | âœ… | âŒ |
| write | âœ… | âœ… |
| delete | âœ… | âœ… |

# è”ç³»æˆ‘ä»¬

* ä½œè€…ï¼šRick
* é‚®ç®±ï¼šrick@guaik.io
* QQï¼š3558888808
* QQç¾¤ï¼š564354254